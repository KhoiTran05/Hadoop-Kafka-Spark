# Spark Configuration 

# Driver Settings
spark.driver.memory                 2g
spark.driver.cores                  2
spark.driver.maxResultSize          1g

# Executor Settings
spark.executor.memory               2g
spark.executor.cores                2
spark.executor.instances            2

# Adaptive Query Execution
spark.sql.adaptive.enabled      true
spark.sql.adaptive.coalescePartitions.enabled   true
spark.sql.adaptive.coalescePartitions.parallelismFirst false
spark.sql.adaptive.skewJoin.enabled true

# Shuffle settings
spark.sql.shuffle.partitions        200
spark.shuffle.compress              true
spark.shuffle.spill.compress        true

# Serialization
spark.serializer                    org.apache.spark.serializer.KryoSerializer

# Kafka configuration
spark.kafka.bootstrap.servers          kafka:29092
spark.kafka.security.protocol          PLAINTEXT

# Checkpointing and Recovery
spark.sql.streaming.checkpointLocation  hdfs://namenode:9000/checkpoints
spark.sql.recovery.checkpointInterval   10s

# Monitoring and Metrics
spark.eventLog.enabled                 true
spark.eventLog.dir                     hdfs://namenode:9000/spark-events

# Network and Storage
spark.network.timeout                  300s
spark.memory.fraction                  0.6
spark.memory.storageFraction           0.5

# UI Configuration
spark.ui.port                          4040
spark.ui.retainedJobs                  1000
spark.ui.retainedStages                1000
